function GenerateSynthData( )

rng(1);
sqrtN = 18;
synth_sigsq = 0:8;

coords = zeros(sqrtN^2,2);
adj_list = cell(sqrtN^2,1);
for r = 1:sqrtN
    for c = 1:sqrtN
        currVox = c + (r-1)*sqrtN;
        coords(currVox,:) = [r c];
        adj_list{currVox} = [];
        if (r > 1)
            adj_list{currVox} = [adj_list{currVox} (c+(r-2)*sqrtN)];
        end
        if (r < sqrtN)
            adj_list{currVox} = [adj_list{currVox} (c+r*sqrtN)];
        end
        if (c > 1)
            adj_list{currVox} = [adj_list{currVox} (c-1+(r-1)*sqrtN)];
        end
        if (c < sqrtN)
            adj_list{currVox} = [adj_list{currVox} (c+1+(r-1)*sqrtN)];
        end
    end
end

% Square
z = [ ...
 1 1 1 1 1 1 4 4 4 4 4 4 7 7 7 7 7 7 ...
 1 1 1 1 1 1 4 4 4 4 4 4 7 7 7 7 7 7 ...
 1 1 1 1 1 1 4 4 4 4 4 4 7 7 7 7 7 7 ...
 1 1 1 1 1 1 4 4 4 4 4 4 7 7 7 7 7 7 ...
 1 1 1 1 1 1 4 4 4 4 4 4 7 7 7 7 7 7 ...
 1 1 1 1 1 1 4 4 4 4 4 4 7 7 7 7 7 7 ...
 2 2 2 2 2 2 5 5 5 5 5 5 8 8 8 8 8 8 ...
 2 2 2 2 2 2 5 5 5 5 5 5 8 8 8 8 8 8 ...
 2 2 2 2 2 2 5 5 5 5 5 5 8 8 8 8 8 8 ...
 2 2 2 2 2 2 5 5 5 5 5 5 8 8 8 8 8 8 ...
 2 2 2 2 2 2 5 5 5 5 5 5 8 8 8 8 8 8 ...
 2 2 2 2 2 2 5 5 5 5 5 5 8 8 8 8 8 8 ...
 3 3 3 3 3 3 6 6 6 6 6 6 9 9 9 9 9 9 ...
 3 3 3 3 3 3 6 6 6 6 6 6 9 9 9 9 9 9 ...
 3 3 3 3 3 3 6 6 6 6 6 6 9 9 9 9 9 9 ...
 3 3 3 3 3 3 6 6 6 6 6 6 9 9 9 9 9 9 ...
 3 3 3 3 3 3 6 6 6 6 6 6 9 9 9 9 9 9 ...
 3 3 3 3 3 3 6 6 6 6 6 6 9 9 9 9 9 9];
for s = 1:length(synth_sigsq);
    D = GenConnectivity(z, synth_sigsq(s));
    save(['../data/synth/square_' num2str(synth_sigsq(s)) '.mat'],'coords','adj_list','z','D');
end


% Stripes
z = [ ...
 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ...
 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ...
 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 ...
 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 ...
 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 ...
 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 ...
 1 1 1 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 ...
 1 1 1 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 ...
 1 1 1 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 ...
 1 1 1 2 2 2 3 3 3 4 4 4 4 4 4 4 4 4 ...
 1 1 1 2 2 2 3 3 3 4 4 4 4 4 4 4 4 4 ...
 1 1 1 2 2 2 3 3 3 4 4 4 4 4 4 4 4 4 ...
 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 5 5 5 ...
 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 5 5 5 ...
 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 5 5 5 ...
 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 6 6 6 ...
 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 6 6 6 ...
 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 6 6 6];
for s = 1:length(synth_sigsq);
    D = GenConnectivity(z, synth_sigsq(s));
    save(['../data/synth/stripes_' num2str(synth_sigsq(s)) '.mat'],'coords','adj_list','z','D');
end

% Face
z = [ ...
 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 ...
 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 ...
 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 ...
 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 ...
 1 1 1 1 3 3 3 1 1 2 2 4 4 4 2 2 2 2 ...
 1 1 1 1 3 3 3 1 1 2 2 4 4 4 2 2 2 2 ...
 1 1 1 1 3 3 3 1 1 2 2 4 4 4 2 2 2 2 ...
 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 ...
 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 ...
 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 ...
 1 1 1 5 5 1 1 1 1 2 2 2 2 5 5 2 2 2 ...
 1 1 1 5 5 1 1 1 1 2 2 2 2 5 5 2 2 2 ...
 1 1 1 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 ...
 1 1 1 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 ...
 1 1 1 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 ...
 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 ...
 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 ...
 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2];
for s = 1:length(synth_sigsq);
    D = GenConnectivity(z, synth_sigsq(s));
    save(['../data/synth/face_' num2str(synth_sigsq(s)) '.mat'],'coords','adj_list','z','D');
end
end

function D = GenConnectivity(z, sigsq)

sqrtN = sqrt(length(z));
K = length(unique(z));

A = zeros(K,K);
for i = 1:K
    for j = i:K
        A(i,j) = randi(3);
    end
end
A = A + triu(A,1)';

D = zeros(sqrtN^2, sqrtN^2);
for r = 1:sqrtN
    for c = 1:sqrtN
        currVox = c + (r-1)*sqrtN;
        for connVox = currVox+1:sqrtN^2
            D(currVox,connVox) = sigsq*randn(1) + A(z(currVox),z(connVox));
        end
    end
end
D = D+triu(D,1)';
end